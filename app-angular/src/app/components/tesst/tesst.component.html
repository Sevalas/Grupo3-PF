<div class="container-flex h-100 w-100">
    <div class="row w-100 h-100 m-0">
        <div class="col-4  bg-white text-dark">
            <div class="row h-25">
                <div class="w-100 mr-3">
                    <a class="text-right click">
                        <h3>Conocenos</h3>
                    </a>
                </div>
            </div>
            <div class="row h-75">
                <div class="col text-center login">
                    <h1>PetAdopt <mat-icon>pets</mat-icon>
                    </h1>
                    <h2>Ingrese a PetAdopt</h2>
                    <br>
                    <br>
                    <form [formGroup]="loginForm" (ngSubmit)="loginOnSubmit()">
                        <mat-form-field appearance="outline" class="input w-100">
                            <mat-label>Usuario</mat-label>
                            <input matInput placeholder="Ingrese Usuario" formControlName="usuario"
                                [ngClass]="{ 'is-invalid': loginSubmitted && fLogin.usuario.errors }"
                                [(ngModel)]="user" />
                            <mat-error *ngIf="loginSubmitted && fLogin.usuario.errors" class="invalid-feedback">
                                <div *ngIf="fLogin.usuario.errors.required">El usuario es requerido</div>
                            </mat-error>
                        </mat-form-field>
                        <br>
                        <mat-form-field appearance="outline" class="input w-100">
                            <mat-label>Contraseña</mat-label>
                            <input matInput placeholder="Ingrese Contraseña" [type]="hide ? 'password' : 'text'"
                                formControlName="contrasena"
                                [ngClass]="{ 'is-invalid': loginSubmitted && fLogin.contrasena.errors }"
                                [(ngModel)]="pass" />
                            <button type="button" mat-icon-button matSuffix (click)="hide = !hide"
                                [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                            </button>
                            <mat-error *ngIf="loginSubmitted && fLogin.contrasena.errors" class="invalid-feedback">
                                <div *ngIf="fLogin.contrasena.errors.required">La contraseña es requerido</div>
                            </mat-error>
                        </mat-form-field>
                        <p>
                            <ngb-alert [dismissible]="false" *ngIf='noExiste'>
                                <strong>Alerta!</strong> El Usuario no existe.
                            </ngb-alert>
                            <ngb-alert [dismissible]="false" *ngIf='CredencialesIncorrectas'>
                                <strong>Alerta!</strong> El Usuario/Contraseña son incorrectos.
                            </ngb-alert>
                        </p>
                        <div class="text-right">
                            <a class="click">¿Olvidaste tu contraseña?</a>
                        </div>
                        <br>
                        <div class="form-group mt-2 text-center">
                            <button mat-raised-button id='inicio' class="w-75 boton">Iniciar Sesion</button>
                        </div>
                    </form>
                    <a class="click" (click)="open(content)" style="cursor: pointer;">Registrate Aqui</a>
                </div>
            </div>
        </div>
        <div class="col-8 foto p-0 h-100" style="overflow:hidden; pointer-events: none;">
            <mat-carousel timings="500ms ease-in" [autoplay]="true" interval="3500" maxWidth="100"
                [maintainAspectRatio]="false" slideHeight="100%" slides="5" [loop]="true" [hideArrows]="true"
                [hideIndicators]="true" [useKeyboard]="false" [useMouseWheel]="false" orientation="ltr">
                <mat-carousel-slide #matCarouselSlide *ngFor="let slide of slides; let i = index" [image]="slide.image"
                    overlayColor="#00000040" [hideOverlay]="true"></mat-carousel-slide>
            </mat-carousel>
        </div>
    </div>
</div>



<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Hi there!</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="registerForm" (ngSubmit)="registerOnSubmit()">

            <div class="row">
              <div class="col gridFormulario">
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Usuario</mat-label>
                  <input matInput placeholder="Ingrese Usuario" type="text" formControlName="usuario"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.usuario.errors }" />
                  <mat-error *ngIf="registerSubmitted && fRegister.usuario.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.usuario.errors.required">El usuario es requerido</div>
                  </mat-error>
                </mat-form-field>
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Contraseña</mat-label>
                  <input matInput placeholder="Ingrese Contraseña" [type]="hide ? 'password' : 'text'" formControlName="contrasena"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.contrasena.errors }" />
                    <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                      <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                      </button>
                  <mat-error *ngIf="registerSubmitted && fRegister.contrasena.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.contrasena.errors.required">La contraseña es requerido</div>
                  </mat-error>
                </mat-form-field>
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Correo Electronico</mat-label>
                  <input matInput placeholder="Ingrese Usuario" type="email" formControlName="correoE"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.correoE.errors }" />
                  <mat-error *ngIf="registerSubmitted && fRegister.correoE.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.correoE.errors.required">El Correo Electronico es requerido</div>
                  </mat-error>
                </mat-form-field>
    
              </div>
            </div>
    
            <div class="row">
              <div class="col gridFormulario">
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Nombre</mat-label>
                  <input matInput placeholder="Ingrese Usuario" type="text" formControlName="nombre"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.nombre.errors }" />
                  <mat-error *ngIf="registerSubmitted && fRegister.nombre.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.nombre.errors.required">El nombre es requerido</div>
                  </mat-error>
                </mat-form-field>
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Apellido</mat-label>
                  <input matInput placeholder="Ingrese Apellido" type="text" formControlName="apellido"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.apellido.errors }" />
                  <mat-error *ngIf="registerSubmitted && fRegister.apellido.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.apellido.errors.required">El apellido es requerido</div>
                  </mat-error>
                </mat-form-field>
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Fecha de Nacimiento</mat-label>
                  <input matInput [matDatepicker]="picker" formControlName="fechaNac"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.fechaNac.errors }" />
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                  <mat-error *ngIf="registerSubmitted && fRegister.fechaNac.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.fechaNac.errors.required">La Fecha de nacimiento es requerida</div>
                  </mat-error>
                </mat-form-field>
    
              </div>
              <div class="col gridFormulario">
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Genero</mat-label>
                  <mat-select formControlName="genero" [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.genero.errors }">
                    <mat-option value="M">Masculino</mat-option>
                    <mat-option value="F">Femenino</mat-option>
                  </mat-select>
                  <mat-error *ngIf="registerSubmitted && fRegister.genero.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.genero.errors.required">El genero es requerido</div>
                  </mat-error>
                </mat-form-field>
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Región</mat-label>
                  <mat-select name="region" formControlName="region"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.region.errors }" [(ngModel)]="regionSeleccionada">
                    <mat-option *ngFor="let item of regionesYcomunas" [value]="item.NombreRegion" (click)='filtroComuna()'>{{item.NombreRegion}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="registerSubmitted && fRegister.region.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.region.errors.required">La región es requerida</div>
                  </mat-error>
                </mat-form-field>
    
                <mat-form-field appearance="outline" class="input">
                  <mat-label>Comuna</mat-label>
                  <mat-select name="comuna" formControlName="comuna"
                    [ngClass]="{ 'is-invalid': registerSubmitted && fRegister.comuna.errors }" [(ngModel)]="comunaSeleccionada">
                    <mat-option *ngFor="let item of listaDeColumnas" [value]="item">{{item}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="registerSubmitted && fRegister.comuna.errors" class="invalid-feedback">
                    <div *ngIf="fRegister.comuna.errors.required">La comuna es requerida</div>
                  </mat-error>
                </mat-form-field>
    
              </div>
            </div>
    
            <div class="form-group mt-2 text-center">
              <button mat-raised-button id='Registrarse' class="w-100 boton">Registrarse</button>
            </div>
          </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="c('Save click')">Save</button>
    </div>
</ng-template>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Profile update</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label for="dateOfBirth">Date of birth</label>
                <div class="input-group">
                    <input id="dateOfBirth" class="form-control" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker
                        #dp="ngbDatepicker">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary calendar" (click)="dp.toggle()" type="button"></button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Save</button>
    </div>
</ng-template>